<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="utf-8">
    <title>WDXL字体文字图片生成器</title>
    <style>
        @font-face {
            font-family: 'WDXL Lubrifont SC Local';
            src: url('./WDXLLubrifontSC-Regular.ttf') format('truetype');
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-family: 'WDXL Lubrifont SC Local', 'Microsoft YaHei', sans-serif;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .preview {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
        }

        .text-preview {
            font-family: 'WDXL Lubrifont SC Local', 'Microsoft YaHei', sans-serif;
            margin: 10px 0;
        }

        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        .btn:hover {
            background: #0056b3;
        }

        #textCanvas {
            border: 1px solid #ddd;
            margin-top: 20px;
            max-width: 100%;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>WDXL字体文字图片生成器</h1>

        <div class="controls">
            <div>
                <div class="control-group">
                    <label for="textInput">输入文字：</label>
                    <textarea id="textInput" rows="3">云枢管理平台</textarea>
                </div>

                <div class="control-group">
                    <label for="fontSize">字体大小：<span id="fontSizeValue">60px</span></label>
                    <input type="range" id="fontSize" min="20" max="200" value="60">
                </div>

                <div class="control-group">
                    <label for="textColor">文字颜色：</label>
                    <input type="color" id="textColor" value="#000000">
                </div>

                <div class="control-group">
                    <label for="bgColor">背景颜色：</label>
                    <input type="color" id="bgColor" value="#ffffff">
                </div>
            </div>

            <div>
                <div class="control-group">
                    <label for="canvasWidth">画布宽度：<span id="canvasWidthValue">800px</span></label>
                    <input type="range" id="canvasWidth" min="400" max="2000" value="800">
                </div>

                <div class="control-group">
                    <label for="canvasHeight">画布高度：<span id="canvasHeightValue">400px</span></label>
                    <input type="range" id="canvasHeight" min="200" max="1500" value="400">
                </div>

                <div class="control-group">
                    <label for="textAlign">文字对齐：</label>
                    <select id="textAlign">
                        <option value="center">居中</option>
                        <option value="left">左对齐</option>
                        <option value="right">右对齐</option>
                    </select>
                </div>

                <div class="control-group">
                    <button class="btn" onclick="generateImage()">生成图片</button>
                    <button class="btn" onclick="downloadImage()">下载图片</button>
                </div>
            </div>
        </div>

        <div class="preview">
            <h3>实时预览</h3>
            <div id="textPreview" class="text-preview">云枢管理平台</div>
        </div>

        <canvas id="textCanvas" style="display: none;"></canvas>
    </div>

    <script>
        const textInput = document.getElementById('textInput');
        const fontSize = document.getElementById('fontSize');
        const fontSizeValue = document.getElementById('fontSizeValue');
        const textColor = document.getElementById('textColor');
        const bgColor = document.getElementById('bgColor');
        const canvasWidth = document.getElementById('canvasWidth');
        const canvasWidthValue = document.getElementById('canvasWidthValue');
        const canvasHeight = document.getElementById('canvasHeight');
        const canvasHeightValue = document.getElementById('canvasHeightValue');
        const textAlign = document.getElementById('textAlign');
        const textPreview = document.getElementById('textPreview');
        const canvas = document.getElementById('textCanvas');
        const ctx = canvas.getContext('2d');

        function updatePreview() {
            textPreview.style.fontSize = fontSize.value + 'px';
            textPreview.style.color = textColor.value;
            textPreview.style.textAlign = textAlign.value;
            textPreview.textContent = textInput.value || '请输入文字...';
        }

        function updateDisplayValues() {
            fontSizeValue.textContent = fontSize.value + 'px';
            canvasWidthValue.textContent = canvasWidth.value + 'px';
            canvasHeightValue.textContent = canvasHeight.value + 'px';
        }

        textInput.addEventListener('input', updatePreview);
        fontSize.addEventListener('input', () => {
            updatePreview();
            updateDisplayValues();
        });
        textColor.addEventListener('input', updatePreview);
        canvasWidth.addEventListener('input', updateDisplayValues);
        canvasHeight.addEventListener('input', updateDisplayValues);
        textAlign.addEventListener('change', updatePreview);

        updatePreview();
        updateDisplayValues();

        function generateImage() {
            const width = parseInt(canvasWidth.value);
            const height = parseInt(canvasHeight.value);

            canvas.width = width;
            canvas.height = height;

            ctx.fillStyle = bgColor.value;
            ctx.fillRect(0, 0, width, height);

            ctx.font = `${fontSize.value}px 'WDXL Lubrifont SC Local', 'Microsoft YaHei', sans-serif`;
            ctx.fillStyle = textColor.value;
            ctx.textAlign = textAlign.value;
            ctx.textBaseline = 'middle';

            const text = textInput.value || '请输入文字...';
            const x = textAlign.value === 'left' ? width * 0.05 :
                textAlign.value === 'right' ? width * 0.95 : width / 2;
            const y = height / 2;

            ctx.fillText(text, x, y);

            canvas.style.display = 'block';
        }

        function downloadImage() {
            if (canvas.style.display === 'none') {
                alert('请先生成图片！');
                return;
            }

            const link = document.createElement('a');
            link.download = `WDXL文字图片_${Date.now()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        window.addEventListener('load', () => {
            setTimeout(generateImage, 500);
        });
    </script>
</body>

</html>